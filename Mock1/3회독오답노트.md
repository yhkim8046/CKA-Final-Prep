## 멀티 컨테이너 파드 

```
apiVersion: v1
kind: Pod
metadata:
  name: mc-pod
  namespace: mc-namespace
spec:
  containers:
    - name: mc-pod-1
      image: nginx:1-alpine
      env:
        - name: NODE_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
    - name: mc-pod-2
      image: busybox:1
      volumeMounts:
        - name: shared-volume
          mountPath: /var/log/shared
      command:
        - "sh"
        - "-c"
        - "while true; do date >> /var/log/shared/date.log; sleep 1; done" # 여기와 동일
    - name: mc-pod-3
      image: busybox:1
      command:
        - "sh"
        - "-c"
        - "tail -f /var/log/shared/date.log"
      volumeMounts:
        - name: shared-volume
          mountPath: /var/log/shared # 마운트 패스가 로그 기록하는 곳과 동일해야 로그를 읽어 올 수 있음
  volumes:
    - name: shared-volume
      emptyDir: {}
```
---
## 헬름 업그레이드 과정

설치된 릴리스 확인

```
helm ls -n kk-ns
```

(필요 시) 차트 저장소 확인/추가
```
helm repo ls
```

bitnami가 없다면:

```
helm repo add bitnami https://charts.bitnami.com/bitnami
```

repo 인덱스 최신화; helm repo update는 네임스페이스 옵션 없음, 릴리스 이름도 넣지 않음.

```
helm repo update
```

원하는 차트 버전 존재 확인
⚠️ helm search repo는 repo/chart 형태로 검색, 네임스페이스 옵션 없음.

```
helm search repo bitnami/nginx --versions | head -n 20
# 여기서 18.1.15가 보이는지 확인
```

업그레이드 실행
⚠️ 차트 인자는 nginx-18.1.0 같은 “버전 문자열”이 아니라 repo/chart여야 함.

```
helm upgrade kk-mock1 bitnami/nginx \
  -n kk-ns \
  --version 18.1.15 \
  --set replicaCount=2
```

검증

```
helm ls -n kk-ns             # CHART 컬럼이 nginx-18.1.15인지 확인
helm status kk-mock1 -n kk-ns
kubectl get deploy,po -n kk-ns -l app.kubernetes.io/instance=kk-mock1
```